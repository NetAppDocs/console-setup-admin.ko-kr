---
sidebar: sidebar 
permalink: task-adding-aws-accounts.html 
keywords: permissions, aws, policy, iam, iam role, role, granting, policy, iam policy, iam user, access keys, arn, cloud provider accounts, aws, cloud provider profile, json, iam, credentials, adding credentials, add credentials, bluexp 
summary: NetApp 콘솔이 AWS 계정의 클라우드 리소스를 배포하고 관리하는 데 필요한 권한을 갖도록 AWS 자격 증명을 추가하고 관리합니다.  여러 AWS 구독을 관리하는 경우 자격 증명 페이지에서 각 구독에 다른 AWS 자격 증명을 할당할 수 있습니다. 
---
= NetApp 콘솔에 대한 AWS 자격 증명 및 마켓플레이스 구독 관리
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
NetApp 콘솔에서 AWS 계정의 클라우드 리소스를 배포하고 관리할 수 있도록 AWS 자격 증명을 추가하고 관리합니다.  여러 AWS Marketplace 구독을 관리하는 경우 자격 증명 페이지에서 각 구독에 다른 AWS 자격 증명을 할당할 수 있습니다.



== 개요

AWS 자격 증명을 기존 콘솔 에이전트에 추가하거나 콘솔에 직접 추가할 수 있습니다.

* 기존 에이전트에 추가 AWS 자격 증명 추가
+
AWS 자격 증명을 콘솔 에이전트에 추가하여 클라우드 리소스를 관리합니다. <<add-aws-credentials-agent-creation,콘솔 에이전트에 AWS 자격 증명을 추가하는 방법을 알아보세요.>> .

* 콘솔 에이전트를 생성하기 위해 콘솔에 AWS 자격 증명을 추가합니다.
+
콘솔에 새로운 AWS 자격 증명을 추가하면 콘솔 에이전트를 만드는 데 필요한 권한이 제공됩니다. <<add-aws-credentials-agent-creation,NetApp 콘솔에 AWS 자격 증명을 추가하는 방법을 알아보세요.>> .

* FSx for ONTAP 콘솔에 AWS 자격 증명 추가
+
FSx for ONTAP 생성하고 관리하려면 콘솔에 새로운 AWS 자격 증명을 추가하세요. https://docs.netapp.com/us-en/bluexp-fsx-ontap/requirements/task-setting-up-permissions-fsx.html["FSx for ONTAP 에 대한 권한을 설정하는 방법을 알아보세요"^]





== 자격 증명을 회전하는 방법

NetApp 콘솔을 사용하면 에이전트 인스턴스와 연결된 IAM 역할, 신뢰할 수 있는 계정에서 IAM 역할을 맡는 방법, AWS 액세스 키를 제공하는 방법 등 여러 가지 방법으로 AWS 자격 증명을 제공할 수 있습니다. link:concept-accounts-aws.html["AWS 자격 증명 및 권한에 대해 자세히 알아보세요"] .

처음 두 가지 옵션을 사용하면 콘솔은 AWS 보안 토큰 서비스를 사용하여 지속적으로 순환되는 임시 자격 증명을 얻습니다.  이 프로세스는 자동화되어 있고 안전하므로 가장 좋은 방법입니다.

콘솔에서 AWS 액세스 키를 업데이트하여 수동으로 회전합니다.



== 콘솔 에이전트에 추가 자격 증명 추가

퍼블릭 클라우드 환경 내에서 리소스와 프로세스를 관리하는 데 필요한 권한을 갖도록 콘솔 에이전트에 추가 AWS 자격 증명을 추가합니다.  다른 계정의 IAM 역할에 대한 ARN을 제공하거나 AWS 액세스 키를 제공할 수 있습니다.

콘솔을 처음 사용하는 경우link:concept-accounts-aws.html["NetApp 콘솔이 AWS 자격 증명 및 권한을 사용하는 방법을 알아보세요."] .



=== 권한 부여

콘솔 에이전트에 AWS 자격 증명을 추가하기 전에 권한을 부여하세요.  권한을 통해 콘솔 에이전트는 해당 AWS 계정 내의 리소스와 프로세스를 관리할 수 있습니다.  신뢰할 수 있는 계정이나 AWS 키의 역할 ARN을 사용하여 권한을 제공할 수 있습니다.


NOTE: 콘솔에서 콘솔 에이전트를 배포한 경우 콘솔 에이전트를 배포한 계정에 대한 AWS 자격 증명이 자동으로 추가되었습니다.  이를 통해 리소스 관리에 필요한 권한이 있는지 확인할 수 있습니다. link:concept-accounts-aws.html["AWS 자격 증명 및 권한에 대해 알아보세요"] .

*선택사항*

* <<다른 계정에서 IAM 역할을 맡아 권한 부여>>
* <<AWS 키를 제공하여 권한 부여>>




==== 다른 계정에서 IAM 역할을 맡아 권한 부여

IAM 역할을 사용하여 콘솔 에이전트 인스턴스를 배포한 소스 AWS 계정과 다른 AWS 계정 간에 신뢰 관계를 설정할 수 있습니다.  그런 다음 신뢰할 수 있는 계정의 IAM 역할에 대한 ARN을 콘솔에 제공합니다.

온프레미스에 콘솔 에이전트가 설치된 경우 이 인증 방법을 사용할 수 없습니다.  AWS 키를 사용해야 합니다.

.단계
. 콘솔 에이전트에 권한을 부여하려는 대상 계정의 IAM 콘솔로 이동합니다.
. 액세스 관리에서 *역할 > 역할 만들기*를 선택하고 단계에 따라 역할을 만듭니다.
+
다음 사항을 꼭 확인하세요.

+
** *신뢰할 수 있는 엔터티 유형*에서 *AWS 계정*을 선택합니다.
** *다른 AWS 계정*을 선택하고 콘솔 에이전트 인스턴스가 있는 계정의 ID를 입력합니다.
** 내용을 복사하여 붙여넣어 필요한 정책을 만듭니다.link:reference-permissions-aws.html["콘솔 에이전트에 대한 IAM 정책"] .


. 나중에 콘솔에 붙여넣을 수 있도록 IAM 역할의 역할 ARN을 복사합니다.


.결과
해당 계정에는 필요한 권한이 있습니다. <<add-the-credentials,이제 콘솔 에이전트에 자격 증명을 추가할 수 있습니다.>> .



==== AWS 키를 제공하여 권한 부여

IAM 사용자에 대한 AWS 키를 콘솔에 제공하려면 해당 사용자에게 필요한 권한을 부여해야 합니다.  콘솔 IAM 정책은 콘솔에서 사용할 수 있는 AWS 작업과 리소스를 정의합니다.

온프레미스에 콘솔 에이전트가 설치된 경우 이 인증 방법을 사용해야 합니다.  IAM 역할을 사용할 수 없습니다.

.단계
. IAM 콘솔에서 내용을 복사하여 붙여넣어 정책을 만듭니다.link:reference-permissions-aws.html["콘솔 에이전트에 대한 IAM 정책"] .
+
https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_create.html["AWS 설명서: IAM 정책 생성"^]

. 정책을 IAM 역할이나 IAM 사용자에게 연결합니다.
+
** https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html["AWS 설명서: IAM 역할 생성"^]
** https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_manage-attach-detach.html["AWS 설명서: IAM 정책 추가 및 제거"^]




.결과
해당 계정에는 필요한 권한이 있습니다. <<add-the-credentials,이제 콘솔 에이전트에 자격 증명을 추가할 수 있습니다.>> .



=== 자격 증명을 추가하세요

AWS 계정에 필요한 권한을 제공한 후 해당 계정의 자격 증명을 기존 에이전트에 추가할 수 있습니다.  이를 통해 동일한 에이전트를 사용하여 해당 계정에서 Cloud Volumes ONTAP 시스템을 시작할 수 있습니다.

 New credentials in your cloud provider may take a few minutes to become available. Then, add the credentials.
.단계
. 자격 증명을 추가할 콘솔 에이전트를 선택하려면 상단 탐색 모음을 사용하세요.
. 왼쪽 탐색 모음에서 *관리 > 자격 증명*을 선택합니다.
. *조직 자격 증명* 페이지에서 *자격 증명 추가*를 선택하고 마법사의 단계를 따릅니다.
+
.. *자격 증명 위치*: *Amazon Web Services > 에이전트*를 선택합니다.
.. *자격 증명 정의*: 신뢰할 수 있는 IAM 역할의 ARN(Amazon 리소스 이름)을 제공하거나 AWS 액세스 키와 비밀 키를 입력합니다.
.. *마켓플레이스 구독*: 지금 구독하거나 기존 구독을 선택하여 마켓플레이스 구독을 이러한 자격 증명과 연결합니다.
+
시간당 요금(PAYGO) 또는 연간 계약으로 서비스 비용을 지불하려면 AWS 자격 증명을 AWS Marketplace 구독과 연결해야 합니다.

.. *검토*: 새로운 자격 증명에 대한 세부 정보를 확인하고 *추가*를 선택합니다.




.결과
이제 콘솔에 시스템을 추가할 때 세부 정보 및 자격 증명 페이지에서 다른 자격 증명 세트로 전환할 수 있습니다.

image:screenshot_accounts_switch_aws.png["세부 정보 및 자격 증명 페이지에서 계정 전환을 선택한 후 클라우드 공급자 계정 간에 선택하는 모습을 보여주는 스크린샷입니다."]



== 콘솔 에이전트를 생성하기 위해 콘솔에 자격 증명을 추가합니다.

콘솔 에이전트를 만드는 데 필요한 권한을 부여하는 IAM 역할의 ARN을 제공하여 AWS 자격 증명을 추가합니다.  새로운 에이전트를 생성할 때 이러한 자격 증명을 선택할 수 있습니다.



=== IAM 역할 설정

NetApp 콘솔 SaaS(Software as a Service) 계층이 역할을 수행할 수 있도록 IAM 역할을 설정합니다.

.단계
. 대상 계정의 IAM 콘솔로 이동합니다.
. 액세스 관리에서 *역할 > 역할 만들기*를 선택하고 단계에 따라 역할을 만듭니다.
+
다음 사항을 꼭 확인하세요.

+
** *신뢰할 수 있는 엔터티 유형*에서 *AWS 계정*을 선택합니다.
** *다른 AWS 계정*을 선택하고 NetApp Console SaaS의 ID를 입력하세요: 952013314444
** 특히 Amazon FSx for NetApp ONTAP 의 경우 "AWS": "arn:aws:iam::952013314444:root"를 포함하도록 *신뢰 관계* 정책을 편집합니다.
+
예를 들어, 정책은 다음과 같아야 합니다.

+
[source, JSON]
----
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::952013314444:root",
        "Service": "ec2.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}
----
+
참조하다 link:https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies-cross-account-resource-access.html["AWS Identity and Access Management(IAM) 문서"^] IAM에서 계정 간 리소스 액세스에 대한 자세한 내용을 확인하세요.

** 콘솔 에이전트를 만드는 데 필요한 권한을 포함하는 정책을 만듭니다.
+
*** https://docs.netapp.com/us-en/bluexp-fsx-ontap/requirements/task-setting-up-permissions-fsx.html["FSx for ONTAP 에 필요한 권한 보기"^]
*** link:task-install-agent-aws-console.html#aws-permissions-agent["에이전트 배포 정책 보기"]




. 다음 단계에서 콘솔에 붙여넣을 수 있도록 IAM 역할의 역할 ARN을 복사합니다.


.결과
이제 IAM 역할에 필요한 권한이 부여되었습니다. <<add-the-credentials-2,이제 콘솔에 추가할 수 있습니다.>> .



=== 자격 증명을 추가하세요

IAM 역할에 필요한 권한을 제공한 후 콘솔에 역할 ARN을 추가합니다.

.시작하기 전에
IAM 역할을 방금 생성한 경우 사용할 수 있을 때까지 몇 분이 걸릴 수 있습니다.  콘솔에 자격 증명을 추가하기 전에 몇 분 정도 기다리세요.

.단계
. *관리 > 자격 증명*을 선택합니다.
+
image:screenshot-settings-icon-organization.png["콘솔 오른쪽 상단에 있는 설정 아이콘을 보여주는 스크린샷입니다."]

. *조직 자격 증명* 또는 *계정 자격 증명* 페이지에서 *자격 증명 추가*를 선택하고 마법사의 단계를 따릅니다.
+
.. *자격 증명 위치*: *Amazon Web Services > NetApp 콘솔*을 선택합니다.
.. *자격 증명 정의*: IAM 역할의 ARN(Amazon 리소스 이름)을 제공합니다.
.. *검토*: 새로운 자격 증명에 대한 세부 정보를 확인하고 *추가*를 선택합니다.






== Amazon FSx for ONTAP 콘솔에 자격 증명 추가

자세한 내용은 다음을 참조하세요. https://docs.netapp.com/us-en/bluexp-fsx-ontap/requirements/task-setting-up-permissions-fsx.html["Amazon FSx for ONTAP 에 대한 콘솔 설명서"^]



== AWS 구독 구성

AWS 자격 증명을 추가한 후에는 해당 자격 증명을 사용하여 AWS Marketplace 구독을 구성할 수 있습니다.  구독을 통해 시간당 요금(PAYGO) 또는 연간 계약으로 Cloud Volumes ONTAP 에 대한 비용을 지불하고, 다른 데이터 서비스에 대한 비용도 지불할 수 있습니다.

자격 증명을 추가한 후 AWS Marketplace 구독을 구성할 수 있는 시나리오는 두 가지가 있습니다.

* 처음 자격 증명을 추가할 때 구독을 구성하지 않았습니다.
* AWS 자격 증명에 구성된 AWS Marketplace 구독을 변경하려고 합니다.
+
현재 마켓플레이스 구독을 새 구독으로 교체하면 기존 Cloud Volumes ONTAP 시스템과 모든 새 시스템의 마켓플레이스 구독이 변경됩니다.



.시작하기 전에
구독을 구성하려면 먼저 콘솔 에이전트를 만들어야 합니다. link:concept-agents.html#agent-installation["콘솔 에이전트를 만드는 방법을 알아보세요"] .

다음 비디오에서는 AWS Marketplace에서 NetApp Intelligent Services를 구독하는 단계를 보여줍니다.

.AWS Marketplace에서 NetApp Intelligent Services 구독
video::096e1740-d115-44cf-8c27-b051011611eb[panopto]
.단계
. *관리 > 자격 증명*을 선택합니다.
. *조직 자격 증명*을 선택하세요.
. 콘솔 에이전트와 연결된 자격 증명 세트에 대한 작업 메뉴를 선택한 다음 *구독 구성*을 선택합니다.
+
콘솔 에이전트와 연결된 자격 증명을 선택해야 합니다.  NetApp 콘솔과 연결된 자격 증명에는 마켓플레이스 구독을 연결할 수 없습니다.

+
image:screenshot_aws_configure_subscription.png["기존 자격 증명 세트에 대한 작업 메뉴의 스크린샷입니다."]

. 자격 증명을 기존 구독과 연결하려면 아래쪽 목록에서 구독을 선택하고 *구성*을 선택합니다.
. 자격 증명을 새 구독과 연결하려면 *구독 추가 > 계속*을 선택하고 AWS Marketplace의 단계를 따르세요.
+
.. *구매 옵션 보기*를 선택하세요.
.. *구독*을 선택하세요.
.. *계정 설정*을 선택하세요.
+
NetApp 콘솔로 리디렉션됩니다.

.. *구독 할당* 페이지에서:
+
*** 이 구독을 연결할 콘솔 조직이나 계정을 선택하세요.
*** *기존 구독 교체* 필드에서 하나의 조직 또는 계정에 대한 기존 구독을 이 새로운 구독으로 자동으로 교체할지 여부를 선택합니다.
+
콘솔은 조직 또는 계정의 모든 자격 증명에 대한 기존 구독을 이 새로운 구독으로 대체합니다.  자격 증명 세트가 구독과 연결되지 않은 경우 이 새 구독은 해당 자격 증명과 연결되지 않습니다.

+
다른 모든 조직이나 계정의 경우 이 단계를 반복하여 구독을 수동으로 연결해야 합니다.

*** *저장*을 선택하세요.








== 기존 구독을 조직이나 계정과 연결

AWS Marketplace에서 구독하는 경우 프로세스의 마지막 단계는 구독을 조직과 연결하는 것입니다.  이 단계를 완료하지 않으면 귀하의 조직이나 계정에서 구독을 사용할 수 없습니다.

* link:concept-modes.html["콘솔 배포 모드에 대해 알아보세요"]
* link:concept-identity-and-access-management.html["콘솔 ID 및 액세스 관리에 대해 알아보세요"]


AWS Marketplace에서 NetApp 지능형 데이터 서비스를 구독했지만 구독을 계정과 연결하는 단계를 놓친 경우 아래 단계를 따르세요.

.단계
. 구독을 콘솔 조직이나 계정과 연결하지 않았는지 확인하세요.
+
.. 탐색 메뉴에서 *관리 > 라이선스 및 구독*을 선택합니다.
.. *구독*을 선택하세요.
.. 귀하의 구독이 나타나지 않는지 확인하세요.
+
현재 보고 있는 조직이나 계정과 연결된 구독만 볼 수 있습니다.  구독이 보이지 않으면 다음 단계를 진행하세요.



. AWS 콘솔에 로그인하고 *AWS Marketplace 구독*으로 이동합니다.
. 구독을 찾으세요.
+
image:screenshot-aws-marketplace-bluexp-subscription.png["NetApp 구독을 보여주는 AWS Marketplace의 스크린샷입니다."]

. *제품 설정*을 선택하세요.
+
구독 제안 페이지는 새 브라우저 탭이나 창에 로드되어야 합니다.

. *계정 설정*을 선택하세요.
+
image:screenshot-aws-marketplace-set-up-account.png["NetApp 구독과 페이지 오른쪽 상단에 나타나는 계정 설정 옵션을 보여주는 AWS Marketplace의 스크린샷입니다."]

+
netapp.com의 *구독 할당* 페이지가 새 브라우저 탭이나 창에 로드되어야 합니다.

+
먼저 콘솔에 로그인하라는 메시지가 표시될 수 있습니다.

. *구독 할당* 페이지에서:
+
** 이 구독을 연결할 콘솔 조직이나 계정을 선택하세요.
** *기존 구독 교체* 필드에서 하나의 조직 또는 계정에 대한 기존 구독을 이 새로운 구독으로 자동으로 교체할지 여부를 선택합니다.
+
콘솔은 조직 또는 계정의 모든 자격 증명에 대한 기존 구독을 이 새로운 구독으로 대체합니다.  자격 증명 세트가 구독과 연결되지 않은 경우 이 새 구독은 해당 자격 증명과 연결되지 않습니다.

+
다른 모든 조직이나 계정의 경우 이 단계를 반복하여 구독을 수동으로 연결해야 합니다.

+
image:screenshot-subscription-assignment.png["이 구독과 연결할 조직을 선택할 수 있는 구독 할당 페이지의 스크린샷입니다."]



. 구독이 귀하의 조직이나 계정과 연결되어 있는지 확인하세요.
+
.. 탐색 메뉴에서 *관리 > 라이선스 및 구독*을 선택합니다.
.. *구독*을 선택하세요.
.. 구독이 표시되는지 확인하세요.


. 구독이 AWS 자격 증명과 연결되어 있는지 확인하세요.
+
.. 콘솔의 오른쪽 상단에서 설정 아이콘을 선택하고 *자격 증명*을 선택합니다.
.. *조직 자격 증명* 페이지에서 구독이 AWS 자격 증명과 연결되어 있는지 확인합니다.
+
예를 들어 보겠습니다.

+
image:screenshot-credentials-with-subscription.png["AWS 자격 증명을 보여주는 콘솔 계정 자격 증명 페이지의 스크린샷으로, 자격 증명과 연결된 구독 이름을 식별하는 구독 필드가 포함되어 있습니다."]







== 자격 증명 편집

계정 유형(AWS 키 또는 역할 가정)을 변경하거나, 이름을 편집하거나, 자격 증명 자체(키 또는 역할 ARN)를 업데이트하여 AWS 자격 증명을 편집합니다.


NOTE: 콘솔 에이전트 인스턴스 또는 Amazon FSx for ONTAP 인스턴스와 연결된 인스턴스 프로필의 자격 증명은 편집할 수 없습니다.  FSx for ONTAP 인스턴스의 자격 증명 이름만 바꿀 수 있습니다.

.단계
. *관리 > 자격 증명*을 선택합니다.
. *조직 자격 증명* 또는 *계정 자격 증명* 페이지에서 자격 증명 세트에 대한 작업 메뉴를 선택한 다음 *자격 증명 편집*을 선택합니다.
. 필요한 변경 사항을 입력한 후 *적용*을 선택하세요.




== 자격 증명 삭제

더 이상 자격 증명이 필요하지 않으면 삭제할 수 있습니다.  시스템과 연결되지 않은 자격 증명만 삭제할 수 있습니다.


TIP: 콘솔 에이전트 인스턴스와 연결된 인스턴스 프로필의 자격 증명은 삭제할 수 없습니다.

.단계
. *관리 > 자격 증명*을 선택합니다.
. *조직 자격 증명* 또는 *계정 자격 증명* 페이지에서 자격 증명 세트에 대한 작업 메뉴를 선택한 다음 *자격 증명 삭제*를 선택합니다.
. 삭제를 선택하여 확인하세요.

